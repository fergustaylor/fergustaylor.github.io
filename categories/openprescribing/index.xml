<?xml version="1.0" encoding="utf-8" standalone="yes" ?>
<rss version="2.0" xmlns:atom="http://www.w3.org/2005/Atom">
  <channel>
    <title>Fergus Taylor</title>
    <link>https://fergustaylor.github.io/categories/openprescribing/</link>
    <description>Recent content on Fergus Taylor</description>
    <generator>Hugo -- gohugo.io</generator>
    <language>en-uk</language>
    <lastBuildDate>Tue, 27 Mar 2018 00:00:00 +0000</lastBuildDate>
    
        <atom:link href="https://fergustaylor.github.io/categories/openprescribing/index.xml" rel="self" type="application/rss+xml" />
    
    
    <item>
      <title>OpenprescribingR Plots Updated</title>
      <link>https://fergustaylor.github.io/post/openprescribingr-plots-updated/</link>
      <pubDate>Tue, 27 Mar 2018 00:00:00 +0000</pubDate>
      
      <guid>https://fergustaylor.github.io/post/openprescribingr-plots-updated/</guid>
      <description>&lt;script&gt;
function myFunction() {
var frames = document.getElementsByTagName(&#34;iframe&#34;);
for (i = 0; i &lt; frames.length; i++) {
      frames[i].style.height=frames[i].contentDocument.body.scrollHeight +&#39;px&#39;;
  }
}
window.addEventListener(&#34;load&#34;, myFunction);
window.addEventListener(&#34;resize&#34;, myFunction);
&lt;/script&gt;

&lt;style&gt;
iframe {
 width:100%;
}
&lt;/style&gt;

&lt;p&gt;I’ve been looking back at &lt;a href=&#34;https://www.htmlwidgets.org/&#34;&gt;HTML widgets&lt;/a&gt; again this week, having learnt a little more recently about the underline technologies, both D3 and R.&lt;/p&gt;

&lt;p&gt;One of these widgets, an R package called &lt;a href=&#34;https://davidgohel.github.io/ggiraph/reference/index.html&#34;&gt;‘ggiraph’&lt;/a&gt;, was something I’d used in an &lt;a href=&#34;....&#34;&gt;earlier post&lt;/a&gt; to add interactive features to static ggplots. (Based on &lt;a href=&#34;https://github.com/fergustaylor/openprescribingR&#34;&gt;openprescribingR data&lt;/a&gt;).&lt;/p&gt;

&lt;p&gt;I’d originally just ggiraph as a way to add tooltips, but coming back to it with a new set of experiences allowed me to understand more about how you can use it to apply CSS changes, trigger JS code, and even work server-side as part of a Shiny application.&lt;/p&gt;

&lt;p&gt;Unfortunately it doesn&amp;rsquo;t quite support geom_sf, so my plots aren&amp;rsquo;t exact copies. But it was helpful as a tool to experiment a little more with voronoi plots.
I got a little creative with it, plotting geom_point_interactive with tooltips over the top of lines for example. Or voronoi polygons to create a catchment area around a point, an idea I got from this excellent &lt;a href=&#34;https://bl.ocks.org/mbostock/8033015&#34;&gt;block&lt;/a&gt;.&lt;/p&gt;

&lt;p&gt;A few difficulties/limitations I&amp;rsquo;ve noticed;&lt;/p&gt;

&lt;ul&gt;
&lt;li&gt;Geom_line_interactive only allows one tooltip per line (perfect for naming it, but I was hoping to note a range of values as you moved along the axis).
-Geom objects can&amp;rsquo;t work together conventionally, i.e polygon with ID 7 can&amp;rsquo;t trigger CSS changes in point with same ID. Although some creative JS triggers can create the same effect.&lt;/li&gt;
&lt;/ul&gt;

&lt;p&gt;CCGs plotted as geom_polygon_interactive with CCG names as tooltips&lt;/p&gt;

&lt;iframe src=&#34;https://fergustaylor.github.io/openprescribingR/dev/plot1.html&#34;&gt;
&lt;/iframe&gt;

&lt;p&gt;CCGs with prescribing centres overlaid as points&lt;/p&gt;

&lt;iframe src=&#34;https://fergustaylor.github.io/openprescribingR/dev/plot2.html&#34;&gt;
&lt;/iframe&gt;

&lt;p&gt;CCGs with fill colour scaled according to cost per person on &amp;lsquo;BNF Section 7.4.5&amp;rsquo; Drugs, May 2017&lt;/p&gt;

&lt;iframe src=&#34;https://fergustaylor.github.io/openprescribingR/dev/plot5.html&#34;&gt;
&lt;/iframe&gt;

&lt;p&gt;Prescribing centres plotted as points, used to generate voronoi polygons plotted as geom_polygon_interactive, with prescribing centre names as tooltips&lt;/p&gt;

&lt;iframe src=&#34;https://fergustaylor.github.io/openprescribingR/dev/plot6.html&#34;&gt;
&lt;/iframe&gt;

&lt;p&gt;Prescribing centres in NHS West Kent CCG plotted as points, used to generate voronoi polygons within the CCG.&lt;/p&gt;

&lt;iframe src=&#34;https://fergustaylor.github.io/openprescribingR/dev/plot7.5.html&#34;&gt;
&lt;/iframe&gt;

&lt;iframe src=&#34;https://fergustaylor.github.io/openprescribingR/dev/plot8.5.html&#34;&gt;
&lt;/iframe&gt;

&lt;iframe src=&#34;https://fergustaylor.github.io/openprescribingR/dev/plot10.html&#34;&gt;
&lt;/iframe&gt;

&lt;p&gt;I did also make a voronoi plot using the centre of each CCG, just to see what it would look like. But It&amp;rsquo;s not an appropriate way to visualise CCG data, bearing in mind the difficulties of using voronoi plots. For example, each of the CCGs around Hull. &lt;a href=&#34;https://fergustaylor.github.io/openprescribingR/dev/plot11compared.html&#34;&gt;See the map.&lt;/a&gt;&lt;/p&gt;

&lt;iframe src=&#34;https://fergustaylor.github.io/openprescribingR/dev/plot12.html&#34;&gt;
&lt;/iframe&gt;

&lt;iframe src=&#34;https://fergustaylor.github.io/openprescribingR/dev/plot12.5.html&#34;&gt;
&lt;/iframe&gt;

&lt;iframe src=&#34;https://fergustaylor.github.io/openprescribingR/dev/plot12.5.5.html&#34;&gt;
&lt;/iframe&gt;

&lt;p&gt;Now that I’m happier working in D3, I&amp;rsquo;ll consider creating my own widgets at some point.&lt;/p&gt;

&lt;ol&gt;
&lt;li&gt;&lt;a href=&#34;https://www.htmlwidgets.org/develop_intro.html&#34;&gt;https://www.htmlwidgets.org/develop_intro.html&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href=&#34;https://cran.r-project.org/web/packages/ggiraph/index.html&#34;&gt;https://cran.r-project.org/web/packages/ggiraph/index.html&lt;/a&gt;&lt;/li&gt;
&lt;/ol&gt;
</description>
    </item>
    
    <item>
      <title>openprescribingR Plots3</title>
      <link>https://fergustaylor.github.io/post/openprescribingr-plots3/</link>
      <pubDate>Thu, 28 Sep 2017 00:00:00 +0000</pubDate>
      
      <guid>https://fergustaylor.github.io/post/openprescribingr-plots3/</guid>
      <description>&lt;p&gt;OpenprescribingR allows you to explore spending and list size data on over 200 different clinical commissioning groups, 9790 prescribing centres, and 23 BNF sections (as well as every invidual drug or presentation).&lt;/p&gt;

&lt;p&gt;Updated the old &lt;a href=&#34;https://fergustaylor.github.io/post/openprescribingr-plots2/&#34;&gt;openprescribing graphics&lt;/a&gt;, with ggiraph.
Then added some for my last post as well.&lt;/p&gt;

&lt;p&gt;UPDATE 29/03/18: I&amp;rsquo;ve updated the graphics in &lt;a href=&#34;https://fergustaylor.github.io/post/openprescribingr-plots-updated/&#34;&gt;the following post.&lt;/a&gt;&lt;/p&gt;

&lt;iframe src=&#34;https://fergustaylor.github.io/blogimages/post10image.html&#34; width=&#34;100%&#34; height=&#34;600px&#34;&gt;
&lt;/iframe&gt;

&lt;iframe src=&#34;https://fergustaylor.github.io/blogimages/post10image2.html&#34; width=&#34;100%&#34; height=&#34;600px&#34;&gt;
&lt;/iframe&gt;

&lt;iframe src=&#34;https://fergustaylor.github.io/blogimages/post10image3.html&#34; width=&#34;100%&#34; height=&#34;650px&#34;&gt;
&lt;/iframe&gt;

&lt;iframe src=&#34;https://fergustaylor.github.io/blogimages/post10image4.html&#34; width=&#34;100%&#34; height=&#34;600px&#34;&gt;
&lt;/iframe&gt;

&lt;iframe src=&#34;https://fergustaylor.github.io/blogimages/post10image5.html&#34; width=&#34;100%&#34; height=&#34;600px&#34;&gt;
&lt;/iframe&gt;
</description>
    </item>
    
    <item>
      <title>openprescribingR Plots2</title>
      <link>https://fergustaylor.github.io/post/openprescribingr-plots2/</link>
      <pubDate>Wed, 27 Sep 2017 00:00:00 +0000</pubDate>
      
      <guid>https://fergustaylor.github.io/post/openprescribingr-plots2/</guid>
      <description>&lt;p&gt;Experimenting with timelapse drawing in &amp;lsquo;Procreate&amp;rsquo; the ios app; made the following for openprescribingR.&lt;/p&gt;


&lt;div style=&#34;position: relative; padding-bottom: 56.25%; padding-top: 30px; height: 0; overflow: hidden;&#34;&gt;
  &lt;iframe src=&#34;//player.vimeo.com/video/231293393&#34; style=&#34;position: absolute; top: 0; left: 0; width: 100%; height: 100%;&#34; webkitallowfullscreen mozallowfullscreen allowfullscreen&gt;&lt;/iframe&gt;
 &lt;/div&gt;


&lt;p&gt;See the code used in this example &lt;a href=&#34;fergustaylor.github.io/openprescribingR/dev/examplescript&#34;&gt;here.&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;See the repository on &lt;a href=&#34;https://github.com/fergustaylor/openprescribingR&#34;&gt;github.&lt;/a&gt;&lt;/p&gt;


&lt;figure &gt;
    
        &lt;img src=&#34;https://fergustaylor.github.io/blogimages/Rplot6.png&#34;          width=&#34;100%&#34; height=&#34;100%&#34; /&gt;
    
    
&lt;/figure&gt;




&lt;figure &gt;
    
        &lt;img src=&#34;https://fergustaylor.github.io/blogimages/Rplot7.png&#34;          width=&#34;100%&#34; height=&#34;100%&#34; /&gt;
    
    
&lt;/figure&gt;



&lt;p&gt;And a couple I made afterwards after exploring geom_line/geom_ribbon properly.&lt;/p&gt;

&lt;p&gt;Below is a geom_step of each practice spending in the CCG (median value = blue, the chosen clinic&amp;rsquo;s spending = red).
The second is a geom_line version of the same data + dark geom_ribbon for the Q1-Q3, light geom_ribbon for the min-max of values.&lt;/p&gt;


&lt;figure &gt;
    
        &lt;img src=&#34;https://fergustaylor.github.io/openprescribingR/Rplot01.png&#34;          width=&#34;100%&#34; height=&#34;100%&#34; /&gt;
    
    
&lt;/figure&gt;



&lt;p&gt;I&amp;rsquo;ve also been trying out &lt;a href=&#34;https://davidgohel.github.io/ggiraph/index.html&#34;&gt;ggiraph&lt;/a&gt; recently, which seems promising but I&amp;rsquo;ll need to learn more javascript to take full advantage of it and create fully interactive graphs.&lt;/p&gt;

&lt;pre&gt;&lt;code class=&#34;language-r&#34;&gt;westkent &amp;lt;- location_function(&amp;quot;99J&amp;quot;, as_sf = TRUE)
westkent &amp;lt;- westkent %&amp;gt;%
  mutate(
    lon = map_dbl(geometry, ~st_centroid(.x)[[1]]),
    lat = map_dbl(geometry, ~st_centroid(.x)[[2]])
    )
westkent$name &amp;lt;- str_replace_all(westkent$name, &amp;quot;&#39;&amp;quot;, &amp;quot; &amp;quot;)

gg_point =  ggplot() +
  geom_sf(data = westkent[1,]) +
  geom_point_interactive(data = westkent[2:86,],
                         aes(x = lon, y = lat, tooltip = name)) +
  coord_sf(crs= 4326, datum = sf::st_crs(4326))
ggiraph(code = {print(gg_point)})
&lt;/code&gt;&lt;/pre&gt;

&lt;iframe src=&#34;https://fergustaylor.github.io/blogimages/gigraph.html&#34; width=&#34;100%&#34; height=&#34;700px&#34;&gt;
&lt;/iframe&gt;
</description>
    </item>
    
    <item>
      <title>More examples for openprescribingR</title>
      <link>https://fergustaylor.github.io/post/more-examples-for-openprescribingr/</link>
      <pubDate>Mon, 25 Sep 2017 00:00:00 +0000</pubDate>
      
      <guid>https://fergustaylor.github.io/post/more-examples-for-openprescribingr/</guid>
      <description>

&lt;p&gt;This package works by interacting with the openprescribing.net api.
Openprescribing.net continues to collate monthly data from NHS digital,
which means that you can search the entire dataset without downloading
each monthly file. It uses limited search arguments to return data.
(This will be updated as the api changes). As such it&amp;rsquo;s not possible to
return a desired dataset in some cases by using one function alone in
this package. However, it is possible to cross-reference functions in
order to return the dataset you&amp;rsquo;d like.&lt;/p&gt;

&lt;p&gt;For example, I&amp;rsquo;ve added &lt;code&gt;location_function(CCG_Code, as_sf = TRUE)&lt;/code&gt;
which combines &lt;code&gt;organisation_code()&lt;/code&gt; with &lt;code&gt;CCG_boundaries_or_location&lt;/code&gt;
to return a CCG boundary and all practice locations in that CGG.&lt;/p&gt;

&lt;h2 id=&#34;ccg-boundaries-or-location&#34;&gt;CCG_boundaries_or_location&lt;/h2&gt;

&lt;p&gt;All organisations matching a code or name&lt;/p&gt;

&lt;pre&gt;&lt;code&gt;organisation_codes(organisation_code_or_name= &amp;quot;wish&amp;quot;) %&amp;gt;%
  head(3)

##   ccg   code     id                                     name setting
## 1        08L    08L                         NHS LEWISHAM CCG      NA
## 2 NHT Y05547 Y05547 LEWISHAM AND GREENWICH COMM DERM SERVICE       9
## 3 09D G81083 G81083                        WISH PARK SURGERY       4
##               setting_name     type
## 1                               CCG
## 2 Community Health Service Practice
## 3              GP Practice Practice

organisation_codes(organisation_code_or_name= &amp;quot;G81083&amp;quot;) %&amp;gt;%
  head(3)

##   ccg   code     id              name setting setting_name     type
## 1 09D G81083 G81083 WISH PARK SURGERY       4  GP Practice Practice
&lt;/code&gt;&lt;/pre&gt;

&lt;p&gt;Boundaries of all CCGs&lt;/p&gt;

&lt;pre&gt;&lt;code&gt;CCG_boundaries_or_location(as_sf = TRUE) %&amp;gt;%
  head(3)

## Simple feature collection with 3 features and 3 fields
## geometry type:  MULTIPOLYGON
## dimension:      XY
## bbox:           xmin: -2.367716 ymin: 50.70601 xmax: 0.9507036 ymax: 54.55835
## epsg (SRID):    4326
## proj4string:    +proj=longlat +datum=WGS84 +no_defs
##   ons_code                                        name org_type
## 1     &amp;lt;NA&amp;gt; NHS HAMBLETON, RICHMONDSHIRE AND WHITBY CCG      CCG
## 2     &amp;lt;NA&amp;gt;                           NHS MID ESSEX CCG      CCG
## 3     &amp;lt;NA&amp;gt;                      NHS WEST HAMPSHIRE CCG      CCG
##                         geometry
## 1 MULTIPOLYGON(((-0.502740936...
## 2 MULTIPOLYGON(((0.9500694371...
## 3 MULTIPOLYGON(((-0.929614449...
&lt;/code&gt;&lt;/pre&gt;

&lt;p&gt;Boundaries of an individual CCG&lt;/p&gt;

&lt;pre&gt;&lt;code&gt;CCG_boundaries_or_location(CCG_code = &amp;quot;99H&amp;quot;, as_sf = TRUE)

## Simple feature collection with 1 feature and 3 fields
## geometry type:  POLYGON
## dimension:      XY
## bbox:           xmin: -0.4457094 ymin: 51.10515 xmax: -0.1543538 ymax: 51.41195
## epsg (SRID):    4326
## proj4string:    +proj=longlat +datum=WGS84 +no_defs
##   ons_code                 name org_type                       geometry
## 1     &amp;lt;NA&amp;gt; NHS SURREY DOWNS CCG      CCG POLYGON((-0.155107510600155...
&lt;/code&gt;&lt;/pre&gt;

&lt;p&gt;Location (approximate) of a practice, or practices in a CCG, by code&lt;/p&gt;

&lt;pre&gt;&lt;code&gt;CCG_boundaries_or_location(CCG_code = &amp;quot;99H&amp;quot;, practice_code = &amp;quot;P87003&amp;quot;, as_sf = TRUE) %&amp;gt;%
  head(3)

## Simple feature collection with 1 feature and 2 fields
## geometry type:  POINT
## dimension:      XY
## bbox:           xmin: -2.339619 ymin: 53.48488 xmax: -2.339619 ymax: 53.48488
## epsg (SRID):    4326
## proj4string:    +proj=longlat +datum=WGS84 +no_defs
##                            name setting                       geometry
## 1 4/ST ANDREWS MEDICAL PRACTICE       4 POINT(-2.33961911011315 53....
&lt;/code&gt;&lt;/pre&gt;

&lt;p&gt;Location of all practices in a CCG, by code (+ CCG boundary)&lt;/p&gt;

&lt;pre&gt;&lt;code&gt;location_function(CCG_code = &amp;quot;99H&amp;quot;, as_sf = TRUE) %&amp;gt;%
  head(3)
&lt;/code&gt;&lt;/pre&gt;

&lt;h2 id=&#34;drug-details&#34;&gt;drug_details&lt;/h2&gt;

&lt;p&gt;All BNF sections, chemicals and presentations matching a name
(case-insensitive)&lt;/p&gt;

&lt;pre&gt;&lt;code&gt;drug_details(name= &amp;quot;lipid&amp;quot;) %&amp;gt;%
  head(3)

##            id is_generic                           name
## 1        2.12                    Lipid-Regulating Drugs
## 2   021200000              Other Lipid-Regulating Preps
## 3 0212000F0AA       True Colestyramine (Lipid Lowering)
##                        section        type
## 1                              BNF section
## 2 2.12: Lipid-Regulating Drugs    chemical
## 3                                  product
&lt;/code&gt;&lt;/pre&gt;

&lt;p&gt;All chemicals and presentations matching a code =&lt;/p&gt;

&lt;pre&gt;&lt;code&gt;drug_details(chemical_section_or_presentation_code= &amp;quot;0212000AA&amp;quot;) %&amp;gt;%
  head(3)

##            id is_generic                 name                      section
## 1   0212000AA            Rosuvastatin Calcium 2.12: Lipid-Regulating Drugs
## 2 0212000AABB      False              Crestor                             
## 3 0212000AAAA       True    Rosuvastatin Calc                             
##       type
## 1 chemical
## 2  product
## 3  product
&lt;/code&gt;&lt;/pre&gt;

&lt;p&gt;All BNF sections matching a code&lt;/p&gt;

&lt;pre&gt;&lt;code&gt;drug_details(BNF_section= &amp;quot;2.4&amp;quot;) %&amp;gt;%
  head(3)

##            id is_generic
## 1         2.4           
## 2 21010900763      False
## 3 21010900764      False
##                                                      name           type
## 1                        Beta-Adrenoceptor Blocking Drugs    BNF section
## 2 Apollo Pressure-Activated Safety Lancets 2.4mm/21 Gauge product format
## 3 Apollo Pressure-Activated Safety Lancets 2.4mm/23 Gauge product format
&lt;/code&gt;&lt;/pre&gt;

&lt;p&gt;All BNF sections, chemicals and presentations exactly matching a name or
code =&lt;/p&gt;

&lt;pre&gt;&lt;code&gt;drug_details(exact_name_or_code = &amp;quot;21010900763&amp;quot;)

##            id is_generic
## 1 21010900763      False
##                                                      name           type
## 1 Apollo Pressure-Activated Safety Lancets 2.4mm/21 Gauge product format

drug_details(name=&amp;quot;lipid&amp;amp;q=drug&amp;quot;) %&amp;gt;%
  head(3)

##       id is_generic                                    name          type
## 1   10.1            Drugs Used In Rheumatic Diseases &amp;amp; Gout   BNF section
## 2 10.1.1              Non-Steroidal Anti-Inflammatory Drugs BNF paragraph
## 3 10.1.3                Rheumatic Disease Suppressant Drugs BNF paragraph
&lt;/code&gt;&lt;/pre&gt;

&lt;h2 id=&#34;list-size&#34;&gt;list_size&lt;/h2&gt;

&lt;p&gt;Total list size for all CCGs&lt;/p&gt;

&lt;pre&gt;&lt;code&gt;list_size() %&amp;gt;%
  head(3)

##         date row_id                row_name total_list_size
## 1 2012-07-01    00M      NHS SOUTH TEES CCG          289486
## 2 2012-07-01    07Y        NHS HOUNSLOW CCG          285362
## 3 2012-07-01    02G NHS WEST LANCASHIRE CCG          111135
&lt;/code&gt;&lt;/pre&gt;

&lt;p&gt;Total list size by practice code, or CCG code&lt;/p&gt;

&lt;pre&gt;&lt;code&gt;list_size(list_size_by_code= &amp;quot;P87003&amp;quot;) %&amp;gt;%
  head(3)

##         date row_id                      row_name total_list_size
## 1 2012-07-01 P87003 4/ST ANDREWS MEDICAL PRACTICE            3670
## 2 2012-08-01 P87003 4/ST ANDREWS MEDICAL PRACTICE            3670
## 3 2012-09-01 P87003 4/ST ANDREWS MEDICAL PRACTICE            3670
&lt;/code&gt;&lt;/pre&gt;

&lt;p&gt;Total list size by practice code, or CCG code&lt;/p&gt;

&lt;pre&gt;&lt;code&gt;list_size(list_size_by_code= &amp;quot;99H&amp;quot;) %&amp;gt;%
  head(3)

##         date row_id                 row_name total_list_size
## 1 2012-07-01 H81011              NORK CLINIC            6879
## 2 2012-07-01 H81016 FAIRFIELD MEDICAL CENTRE           10671
## 3 2012-07-01 H81017  ASHLEA MEDICAL PRACTICE           18024
&lt;/code&gt;&lt;/pre&gt;

&lt;p&gt;ASTRO-PU cost and items for practices by practice code, or CCG code&lt;/p&gt;

&lt;pre&gt;&lt;code&gt;list_size(ASTRO_PU_by_code= &amp;quot;P87003&amp;quot;) %&amp;gt;%
  head(3)

##   astro_pu_cost astro_pu_items       date row_id
## 1      12955.05       45917.64 2012-07-01 P87003
## 2      12955.05       45917.64 2012-08-01 P87003
## 3      12955.05       45917.64 2012-09-01 P87003
##                        row_name
## 1 4/ST ANDREWS MEDICAL PRACTICE
## 2 4/ST ANDREWS MEDICAL PRACTICE
## 3 4/ST ANDREWS MEDICAL PRACTICE
&lt;/code&gt;&lt;/pre&gt;

&lt;p&gt;ASTRO-PU cost and items for practices by practice code, or CCG code&lt;/p&gt;

&lt;pre&gt;&lt;code&gt;list_size(ASTRO_PU_by_code= &amp;quot;99H&amp;quot;) %&amp;gt;%
  head(3)

##   astro_pu_cost astro_pu_items       date row_id                 row_name
## 1      25122.58       91162.97 2012-07-01 H81011              NORK CLINIC
## 2      45485.01      169021.54 2012-07-01 H81016 FAIRFIELD MEDICAL CENTRE
## 3      68194.28      248983.28 2012-07-01 H81017  ASHLEA MEDICAL PRACTICE
&lt;/code&gt;&lt;/pre&gt;

&lt;h2 id=&#34;organisation-codes&#34;&gt;organisation_codes&lt;/h2&gt;

&lt;p&gt;All organisations matching a code or name&lt;/p&gt;

&lt;pre&gt;&lt;code&gt;organisation_codes(organisation_code_or_name= &amp;quot;Beaumont&amp;quot;) %&amp;gt;%
  head(3)

##   ccg   code     id                            name setting setting_name
## 1 10Q K84049 K84049              27 BEAUMONT STREET       4  GP Practice
## 2 10Q K84016 K84016      19 BEAUMONT STREET SURGERY       4  GP Practice
## 3 04C C82094 C82094 BEAUMONT LODGE MEDICAL PRACTICE       4  GP Practice
##       type
## 1 Practice
## 2 Practice
## 3 Practice
&lt;/code&gt;&lt;/pre&gt;

&lt;p&gt;All CCGs matching a code or name&lt;/p&gt;

&lt;pre&gt;&lt;code&gt;organisation_codes(CCG_code_or_name= &amp;quot;Gloucester&amp;quot;) %&amp;gt;%
  head(3)

##   code  id                          name type
## 1  11M 11M       NHS GLOUCESTERSHIRE CCG  CCG
## 2  12A 12A NHS SOUTH GLOUCESTERSHIRE CCG  CCG
&lt;/code&gt;&lt;/pre&gt;

&lt;p&gt;All practices matching a code or name&lt;/p&gt;

&lt;pre&gt;&lt;code&gt;organisation_codes(practice_code_or_name= &amp;quot;Gloucester&amp;quot;) %&amp;gt;%
  head(3)

##   ccg   code     id                                     name setting
## 1 11M L84052 L84052            GLOUCESTER CITY HEALTH CENTRE       4
## 2 07M E83650 E83650                  GLOUCESTER ROAD SURGERY       4
## 3     Y00224 Y00224 GLOUCESTERSHIRE HEART &amp;amp; DIABETES SERVICE      -1
##   setting_name     type
## 1  GP Practice Practice
## 2  GP Practice Practice
## 3      Unknown Practice
&lt;/code&gt;&lt;/pre&gt;

&lt;p&gt;All organisations exactly matching a code or name&lt;/p&gt;

&lt;pre&gt;&lt;code&gt;organisation_codes(exact_name_or_code= &amp;quot;99H&amp;quot;) %&amp;gt;%
  head(3)

##   code  id                 name type
## 1  99H 99H NHS SURREY DOWNS CCG  CCG
&lt;/code&gt;&lt;/pre&gt;

&lt;p&gt;Or a variation of the above (with at least 1
organisation_code_or_name, CCG_code_or_name,
practice_code_or_name, or exact_name_or_code). N.B For now the use
of multiple terms in one category requires &amp;ldquo;&amp;amp;q=&amp;rdquo;&lt;/p&gt;

&lt;pre&gt;&lt;code&gt;organisation_codes(organisation_code_or_name= &amp;quot;Beaumont&amp;amp;q=Gloucester&amp;quot;) %&amp;gt;%
  head(3)

##   ccg   code     id                          name setting setting_name
## 1        11M    11M       NHS GLOUCESTERSHIRE CCG      NA             
## 2        12A    12A NHS SOUTH GLOUCESTERSHIRE CCG      NA             
## 3 11M L84052 L84052 GLOUCESTER CITY HEALTH CENTRE       4  GP Practice
##       type
## 1      CCG
## 2      CCG
## 3 Practice
&lt;/code&gt;&lt;/pre&gt;

&lt;h2 id=&#34;spending-by-ccg&#34;&gt;spending_by_CCG&lt;/h2&gt;

&lt;pre&gt;&lt;code&gt;spending_by_CCG(chemical_section_or_presentation_code = &amp;quot;0212000AA&amp;quot;) %&amp;gt;%
  head(3)

##   actual_cost       date items quantity row_id
## 1     8726.12 2012-06-01   374    12411    00C
## 2    27737.51 2012-06-01  1376    40698    00D
## 3      456.76 2012-06-01    28      756    00F
##                                         row_name
## 1                             NHS DARLINGTON CCG
## 2 NHS DURHAM DALES, EASINGTON AND SEDGEFIELD CCG
## 3                              NHS GATESHEAD CCG

spending_by_CCG(CCG_code = &amp;quot;03V&amp;quot;) %&amp;gt;%
  head(3)

##   actual_cost       date  items quantity row_id      row_name
## 1    727695.8 2012-06-01 104783  7569723    03V NHS CORBY CCG
## 2    734693.3 2012-07-01 107555  7630021    03V NHS CORBY CCG
## 3    774393.8 2012-08-01 112204  8240186    03V NHS CORBY CCG

spending_by_CCG(chemical_section_or_presentation_code = &amp;quot;0212000AA&amp;quot;, CCG_code = &amp;quot;03V&amp;quot;) %&amp;gt;%
  head(3)

##   actual_cost       date items quantity row_id      row_name
## 1     2725.07 2012-06-01   134     3780    03V NHS CORBY CCG
## 2     2891.62 2012-07-01   142     4046    03V NHS CORBY CCG
## 3     2395.14 2012-08-01   116     3299    03V NHS CORBY CCG
&lt;/code&gt;&lt;/pre&gt;

&lt;h2 id=&#34;spending-by-code&#34;&gt;spending_by_code&lt;/h2&gt;

&lt;pre&gt;&lt;code&gt;spending_by_code() %&amp;gt;%
  head(3)

##   actual_cost       date    items   quantity
## 1   609262986 2012-06-01 78609510 6579046471
## 2   637876694 2012-07-01 82129721 6840558698
## 3   645377536 2012-08-01 83505625 6958818448

spending_by_code(BNF_code = &amp;quot;0212&amp;quot;) %&amp;gt;%
  head(3)

##   actual_cost       date   items  quantity
## 1    23194338 2012-06-01 5159062 179587124
## 2    24127857 2012-07-01 5354064 184967386
## 3    21131928 2012-08-01 5576386 192317248

spending_by_code(BNF_code = &amp;quot;0212000AA&amp;quot;) %&amp;gt;%
  head(3)

##   actual_cost       date  items quantity
## 1     3786943 2012-06-01 162589  5611829
## 2     3816988 2012-07-01 164926  5644667
## 3     3894235 2012-08-01 168824  5759503

spending_by_code(BNF_code = &amp;quot;0212000AABB&amp;quot;) %&amp;gt;%
  head(3)

##   actual_cost       date items quantity
## 1    43547.31 2012-06-01  2071    67743
## 2    45812.47 2012-07-01  2189    71069
## 3    46900.04 2012-08-01  2227    72384

spending_by_code(BNF_code = &amp;quot;2.4&amp;quot;) %&amp;gt;%
  head(3)

##   actual_cost       date   items  quantity
## 1     5490697 2012-06-01 2592902 101530198
## 2     6007044 2012-07-01 2691100 104589395
## 3     6316624 2012-08-01 2808641 108976487

spending_by_code(BNF_code = drug_details(BNF_section = &amp;quot;2.4&amp;quot;)$id[1]) %&amp;gt;%
  head(3)

##   actual_cost       date   items  quantity
## 1     5490697 2012-06-01 2592902 101530198
## 2     6007044 2012-07-01 2691100 104589395
## 3     6316624 2012-08-01 2808641 108976487

id &amp;lt;- drug_details(BNF_section = &amp;quot;2.4&amp;quot;) %&amp;gt;%
  dplyr::filter(name==&amp;quot;Beta-Adrenoceptor Blocking Drugs&amp;quot;) %&amp;gt;%
  dplyr::select(id)

spending_by_code(BNF_code = id) %&amp;gt;%
  head(3)

##   actual_cost       date  items quantity
## 1     4255009 2012-06-01 321575   327894
## 2     4600409 2012-07-01 337109   344489
## 3     3643517 2012-08-01 268566   274154
&lt;/code&gt;&lt;/pre&gt;

&lt;h2 id=&#34;spending-by-practice&#34;&gt;spending_by_practice&lt;/h2&gt;

&lt;pre&gt;&lt;code&gt;spending_by_practice(BNF_section_code = &amp;quot;0212&amp;quot;, date_code = &amp;quot;2015-04-01&amp;quot;) %&amp;gt;%
  head(3)

##   actual_cost ccg       date items quantity row_id
## 1     1428.76 00K 2015-04-01   415    18693 A81001
## 2     7618.02 00K 2015-04-01  2240    91993 A81002
## 3     1127.80 00K 2015-04-01   587    16935 A81003
##                     row_name setting
## 1        THE DENSHAM SURGERY       4
## 2 QUEENS PARK MEDICAL CENTRE       4
## 3  VICTORIA MEDICAL PRACTICE       4

spending_by_practice(chemical_code = &amp;quot;0212000AA&amp;quot;, date_code = &amp;quot;2015-04-01&amp;quot;) %&amp;gt;%
  head(3)

##   actual_cost ccg       date items quantity row_id
## 1      256.16 00K 2015-04-01     6      308 A81001
## 2     1591.17 00K 2015-04-01    62     2436 A81002
## 3       44.16 00K 2015-04-01     2       56 A81003
##                     row_name setting
## 1        THE DENSHAM SURGERY       4
## 2 QUEENS PARK MEDICAL CENTRE       4
## 3  VICTORIA MEDICAL PRACTICE       4

spending_by_practice(practice_code = &amp;quot;H81068&amp;quot;) %&amp;gt;%
  head(3)

##   actual_cost ccg       date items quantity row_id
## 1    124036.3 99H 2012-06-01 19639  1163331 H81068
## 2    124024.1 99H 2012-07-01 20671  1195135 H81068
## 3    134257.4 99H 2012-08-01 21865  1354045 H81068
##                     row_name setting
## 1 BROCKWOOD MEDICAL PRACTICE       4
## 2 BROCKWOOD MEDICAL PRACTICE       4
## 3 BROCKWOOD MEDICAL PRACTICE       4

spending_by_practice(CCG_code = &amp;quot;03V&amp;quot;) %&amp;gt;%
  head(3)

##   actual_cost ccg       date items quantity row_id             row_name
## 1   469772.91 03V 2012-06-01 65453  4682582 K83002  LAKESIDE HEALTHCARE
## 2   109605.96 03V 2012-06-01 16681  1261980 K83059 DR KHALID &amp;amp; PARTNERS
## 3    16817.56 03V 2012-06-01  3399   231437 K83607            DR SUMIRA
##   setting
## 1       4
## 2       4
## 3       4
&lt;/code&gt;&lt;/pre&gt;

&lt;p&gt;Or a variation of the above (with at least 1 practice_code, date_code,
or CCG_code). N.B A BNF section gives a prefix to the chemical, which
gives a prefix to the presentation/product format. e.g. &amp;ldquo;0212&amp;rdquo; are
lipid-regulating drugs, &amp;ldquo;0212000AA&amp;rdquo; is Rosuvastatin Calcium,
&amp;ldquo;0212000AAAAAAAA&amp;rdquo; is Rosuvastatin Calc_Tab 10mg.&lt;/p&gt;
</description>
    </item>
    
    <item>
      <title>openprescribingR Plots</title>
      <link>https://fergustaylor.github.io/post/openprescribingr-plots/</link>
      <pubDate>Fri, 22 Sep 2017 00:00:00 +0000</pubDate>
      
      <guid>https://fergustaylor.github.io/post/openprescribingr-plots/</guid>
      <description>&lt;p&gt;Made a new package to return a set of default plots based on my openprescribingR import tool.&lt;/p&gt;

&lt;p&gt;Currently returns a leaflet map showing;&lt;/p&gt;

&lt;ul&gt;
&lt;li&gt;spending per person&lt;/li&gt;
&lt;li&gt;total spending&lt;/li&gt;
&lt;li&gt;total no. of items&lt;/li&gt;
&lt;li&gt;total quantity of items&lt;/li&gt;
&lt;li&gt;quantity per item&lt;/li&gt;
&lt;li&gt;listsizes&lt;/li&gt;
&lt;/ul&gt;

&lt;p&gt;.. for each CCG, for each month this year.&lt;/p&gt;

&lt;p&gt;This can be for any BNF section, chemical, or presentation.&lt;/p&gt;

&lt;p&gt;&lt;a href=&#34;https://github.com/fergustaylor/openprescribingRplots&#34;&gt;See the repository.&lt;/a&gt;&lt;/p&gt;

&lt;pre&gt;&lt;code class=&#34;language-r&#34;&gt;library(devtools)
devtools::install_github(&amp;quot;fergustaylor/openprescribingRplots&amp;quot;)
library(openprescribingRplots)

plot2017perperson(&amp;quot;7.4.5&amp;quot;)
plot2017total(&amp;quot;7.4.5&amp;quot;)
plot2017items(&amp;quot;7.4.5&amp;quot;)
plot2017quantity(&amp;quot;7.4.5&amp;quot;)
plot2017quantityperitems(&amp;quot;7.4.5&amp;quot;)
plot2017listsize()
&lt;/code&gt;&lt;/pre&gt;

&lt;p&gt;See below for plot2017perperson(&amp;ldquo;7.4.5&amp;rdquo;)&lt;/p&gt;

&lt;iframe src=&#34;https://fergustaylor.github.io/blogimages/post7map.html&#34; width=&#34;100%&#34; height=&#34;500px&#34; &gt;
&lt;/iframe&gt;

&lt;p&gt;&lt;a href=&#34;https://fergustaylor.github.io/blogimages/post7map.html&#34;&gt;See the map.&lt;/a&gt;&lt;/p&gt;
</description>
    </item>
    
    <item>
      <title>openprescribingR UPDATE 2</title>
      <link>https://fergustaylor.github.io/post/openprescribingr-update-2/</link>
      <pubDate>Fri, 15 Sep 2017 00:00:00 +0000</pubDate>
      
      <guid>https://fergustaylor.github.io/post/openprescribingr-update-2/</guid>
      <description>
&lt;figure &gt;
    
        &lt;img src=&#34;https://fergustaylor.github.io/blogimages/Rplot5.png&#34;          width=&#34;100%&#34; height=&#34;100%&#34; /&gt;
    
    
&lt;/figure&gt;



&lt;p&gt;&lt;a href=&#34;https://fergustaylor.github.io/blogimages/post6map.html&#34;&gt;See the map.&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;&lt;a href=&#34;https://fergustaylor.github.io/openprescribingR/dev/clinics.html&#34;&gt;See the code.&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;
&lt;figure &gt;
    
        &lt;img src=&#34;https://fergustaylor.github.io/blogimages/Rplot4.png&#34;          width=&#34;100%&#34; height=&#34;100%&#34; /&gt;
    
    
&lt;/figure&gt;

&lt;/p&gt;


&lt;figure &gt;
    
        &lt;img src=&#34;https://fergustaylor.github.io/blogimages/output.gif&#34;          width=&#34;100%&#34; height=&#34;100%&#34; /&gt;
    
    
&lt;/figure&gt;


</description>
    </item>
    
    <item>
      <title>openprescribingR UPDATE</title>
      <link>https://fergustaylor.github.io/post/openprescribingr-update/</link>
      <pubDate>Wed, 13 Sep 2017 00:00:00 +0000</pubDate>
      
      <guid>https://fergustaylor.github.io/post/openprescribingr-update/</guid>
      <description>

&lt;p&gt;I wanted to plot some of this new openprescribing data geographically today after playing around with the new functions, however I soon realised I needed locations, and so I converted the &amp;lsquo;CCG boundaries&amp;rsquo; section of the api.&lt;/p&gt;

&lt;h2 id=&#34;new-function&#34;&gt;New Function&lt;/h2&gt;

&lt;h2 id=&#34;7-ccg-boundaries&#34;&gt;7. CCG boundaries&lt;/h2&gt;

&lt;p&gt;Search for the boundaries of a CCG, or location of a practice, by code. Returns GeoJSON.&lt;/p&gt;

&lt;table&gt;
&lt;thead&gt;
&lt;tr&gt;
&lt;th&gt;Output&lt;/th&gt;
&lt;th align=&#34;center&#34;&gt;Function&lt;/th&gt;
&lt;/tr&gt;
&lt;/thead&gt;

&lt;tbody&gt;
&lt;tr&gt;
&lt;td&gt;Boundaries of all CCGs&lt;/td&gt;
&lt;td align=&#34;center&#34;&gt;CCG_boundaries_or_location()&lt;/td&gt;
&lt;/tr&gt;

&lt;tr&gt;
&lt;td&gt;Boundaries of an individual CCG&lt;/td&gt;
&lt;td align=&#34;center&#34;&gt;CCG_boundaries_or_location(CCG_code = &amp;ldquo;99H&amp;rdquo;)&lt;/td&gt;
&lt;/tr&gt;

&lt;tr&gt;
&lt;td&gt;Location (approximate) of practices in a CCG, by code&lt;/td&gt;
&lt;td align=&#34;center&#34;&gt;CCG_boundaries_or_location(CCG_code = &amp;ldquo;99H&amp;rdquo;)&lt;/td&gt;
&lt;/tr&gt;

&lt;tr&gt;
&lt;td&gt;Location (approximate) of a practice in a CCG&lt;/td&gt;
&lt;td align=&#34;center&#34;&gt;CCG_boundaries_or_location(CCG_code = &amp;ldquo;99H&amp;rdquo;, practice_code = &amp;ldquo;P87003&amp;rdquo;)&lt;/td&gt;
&lt;/tr&gt;

&lt;tr&gt;
&lt;td&gt;Location (approximate) of a practice in a CCG&lt;/td&gt;
&lt;td align=&#34;center&#34;&gt;CCG_boundaries_or_location(practice_code = &amp;ldquo;P87003&amp;rdquo;)&lt;/td&gt;
&lt;/tr&gt;
&lt;/tbody&gt;
&lt;/table&gt;

&lt;p&gt;Personally I find it very difficult to read JSON files, so you can tidy it up afterwards using JSONlite or tidyjson but I&amp;rsquo;ll leave that to you.&lt;/p&gt;

&lt;p&gt;Plots to come..&lt;/p&gt;

&lt;p&gt;&lt;strong&gt;UPDATE 12:40:&lt;/strong&gt;&lt;/p&gt;

&lt;p&gt;Managed to import/plot using GeoJSON, but since I&amp;rsquo;m not particularly familiar with the format I used the api address..&lt;/p&gt;

&lt;p&gt;&lt;code&gt;st_read(&amp;quot;https://openprescribing.net/api/1.0/org_location/?org_type=ccg&amp;quot;) %&amp;gt;%
st_as_sf()&lt;/code&gt;&lt;/p&gt;

&lt;p&gt;To create a simple features collection, which made things much easier.&lt;/p&gt;

&lt;iframe src=&#34;https://fergustaylor.github.io/blogimages/post5map.html&#34; width=&#34;100%&#34; height=&#34;600px&#34;&gt;
&lt;/iframe&gt;

&lt;p&gt;&lt;a href=&#34;https://fergustaylor.github.io/blogimages/post5map.html&#34;&gt;See the map.&lt;/a&gt;&lt;/p&gt;


&lt;figure &gt;
    
        &lt;img src=&#34;https://fergustaylor.github.io/blogimages/Rplot4.png&#34;          width=&#34;100%&#34; height=&#34;100%&#34; /&gt;
    
    
&lt;/figure&gt;


</description>
    </item>
    
    <item>
      <title>openprescribingR</title>
      <link>https://fergustaylor.github.io/post/openprescribingr/</link>
      <pubDate>Mon, 11 Sep 2017 00:00:00 +0000</pubDate>
      
      <guid>https://fergustaylor.github.io/post/openprescribingr/</guid>
      <description>

&lt;p&gt;Using the (beta) RESTful API and a few lines of R, I made a set of functions to download and import OpenPrescribing data directly into RStudio.
There are 6 functions, divided into data look-up and data-import tools.&lt;/p&gt;

&lt;p&gt;Installation:&lt;/p&gt;

&lt;p&gt;&lt;code&gt;library(devtools)&lt;/code&gt;&lt;/p&gt;

&lt;p&gt;&lt;code&gt;devtools::install_github(&amp;quot;fergustaylor/openprescribingR&amp;quot;)&lt;/code&gt;&lt;/p&gt;

&lt;p&gt;Load:&lt;/p&gt;

&lt;p&gt;&lt;code&gt;library(openprescribingR)&lt;/code&gt;&lt;/p&gt;

&lt;p&gt;&lt;strong&gt;These functions give details on drugs/organisations/list sizes.&lt;/strong&gt;&lt;/p&gt;

&lt;ul&gt;
&lt;li&gt;&lt;p&gt;drug_details()&lt;/p&gt;&lt;/li&gt;

&lt;li&gt;&lt;p&gt;organisation_codes()&lt;/p&gt;&lt;/li&gt;

&lt;li&gt;&lt;p&gt;list_size()&lt;/p&gt;&lt;/li&gt;
&lt;/ul&gt;

&lt;p&gt;&lt;strong&gt;These functions allow you to load data.&lt;/strong&gt;&lt;/p&gt;

&lt;ul&gt;
&lt;li&gt;&lt;p&gt;spending_by_CCG()&lt;/p&gt;&lt;/li&gt;

&lt;li&gt;&lt;p&gt;spending_by_code()&lt;/p&gt;&lt;/li&gt;

&lt;li&gt;&lt;p&gt;spending_by_practice()&lt;/p&gt;&lt;/li&gt;
&lt;/ul&gt;

&lt;p&gt;CCG Boundraries are unavailable for now&lt;/p&gt;

&lt;p&gt;&lt;strong&gt;UPDATE 13/08/17:&lt;/strong&gt;&lt;/p&gt;

&lt;p&gt;CCG Boundaries/Practice locations have been added. Read &lt;a href=&#34;https://fergustaylor.github.io/post/openprescribingr-update/&#34;&gt;here.&lt;/a&gt;&lt;/p&gt;

&lt;h1 id=&#34;spending&#34;&gt;Spending&lt;/h1&gt;

&lt;p&gt;Retrieve total spending and items by CCG or practice on a particular chemical, presentation or BNF section. (Spending is calculated using the actual_cost field in the HSCIC data, items using the total_items field.)&lt;/p&gt;

&lt;h2 id=&#34;1-spending-by-code&#34;&gt;1. Spending by code&lt;/h2&gt;

&lt;p&gt;Queries from August 2010 to date and returns total spending and items by month&lt;/p&gt;

&lt;table&gt;
&lt;thead&gt;
&lt;tr&gt;
&lt;th&gt;Output&lt;/th&gt;
&lt;th align=&#34;center&#34;&gt;Function&lt;/th&gt;
&lt;/tr&gt;
&lt;/thead&gt;

&lt;tbody&gt;
&lt;tr&gt;
&lt;td&gt;Total prescribing spending by month&lt;/td&gt;
&lt;td align=&#34;center&#34;&gt;spending_by_code()&lt;/td&gt;
&lt;/tr&gt;

&lt;tr&gt;
&lt;td&gt;Total by BNF code by month&lt;/td&gt;
&lt;td align=&#34;center&#34;&gt;spending_by_code(BNF_code = &amp;ldquo;&amp;hellip;&amp;rdquo;)&lt;/td&gt;
&lt;/tr&gt;
&lt;/tbody&gt;
&lt;/table&gt;

&lt;h2 id=&#34;2-spending-by-ccg&#34;&gt;2. Spending by CCG&lt;/h2&gt;

&lt;p&gt;Queries from April 2013 to date and returns spending and items by CCG by month.&lt;/p&gt;

&lt;table&gt;
&lt;thead&gt;
&lt;tr&gt;
&lt;th&gt;Output&lt;/th&gt;
&lt;th align=&#34;center&#34;&gt;Function&lt;/th&gt;
&lt;/tr&gt;
&lt;/thead&gt;

&lt;tbody&gt;
&lt;tr&gt;
&lt;td&gt;Spending by CCG on a chemical&lt;/td&gt;
&lt;td align=&#34;center&#34;&gt;spending_by_CCG(chemical_code = &amp;ldquo;&amp;hellip;&amp;rdquo;)&lt;/td&gt;
&lt;/tr&gt;

&lt;tr&gt;
&lt;td&gt;Individual CCGs by code (+/- on a chemical)&lt;/td&gt;
&lt;td align=&#34;center&#34;&gt;spending_by_CCG(CCG_code = &amp;ldquo;&amp;hellip;&amp;rdquo;)&lt;/td&gt;
&lt;/tr&gt;
&lt;/tbody&gt;
&lt;/table&gt;

&lt;h2 id=&#34;3-spending-by-practice&#34;&gt;3. Spending by practice&lt;/h2&gt;

&lt;p&gt;Queries from August 2010 to date and returns total spending and items by practice by month.
You must specify either an organisation, or a date.&lt;/p&gt;

&lt;table&gt;
&lt;thead&gt;
&lt;tr&gt;
&lt;th&gt;Output&lt;/th&gt;
&lt;th align=&#34;center&#34;&gt;Function&lt;/th&gt;
&lt;/tr&gt;
&lt;/thead&gt;

&lt;tbody&gt;
&lt;tr&gt;
&lt;td&gt;Spending by all practices on a BNF section&lt;/td&gt;
&lt;td align=&#34;center&#34;&gt;spending_by_practice(BNF_section_code = &amp;ldquo;&amp;hellip;&amp;rdquo;)&lt;/td&gt;
&lt;/tr&gt;

&lt;tr&gt;
&lt;td&gt;Spending by all practices on a chemical&lt;/td&gt;
&lt;td align=&#34;center&#34;&gt;spending_by_practice(chemical_code = &amp;ldquo;&amp;hellip;&amp;rdquo;)&lt;/td&gt;
&lt;/tr&gt;

&lt;tr&gt;
&lt;td&gt;Spending by all practices on a presentation&lt;/td&gt;
&lt;td align=&#34;center&#34;&gt;spending_by_practice(presentation_code = &amp;ldquo;&amp;hellip;&amp;rdquo;)&lt;/td&gt;
&lt;/tr&gt;

&lt;tr&gt;
&lt;td&gt;Spending by an individual practice&lt;/td&gt;
&lt;td align=&#34;center&#34;&gt;spending_by_practice(practice_code = &amp;ldquo;&amp;hellip;&amp;rdquo;)&lt;/td&gt;
&lt;/tr&gt;

&lt;tr&gt;
&lt;td&gt;Spending by all practices in a CCG&lt;/td&gt;
&lt;td align=&#34;center&#34;&gt;spending_by_practice(CCG_code = &amp;ldquo;&amp;hellip;&amp;rdquo;)&lt;/td&gt;
&lt;/tr&gt;
&lt;/tbody&gt;
&lt;/table&gt;

&lt;p&gt;Or a variation of the above (with at least 1 practice_code, date_code, or CCG_code).&lt;/p&gt;

&lt;h1 id=&#34;information&#34;&gt;Information&lt;/h1&gt;

&lt;p&gt;Methods to retrieve information about CCGs, practices, and BNF codes.&lt;/p&gt;

&lt;h2 id=&#34;4-drug-details&#34;&gt;4. Drug Details&lt;/h2&gt;

&lt;p&gt;Search for the official name and code of BNF sections, chemicals and presentations.&lt;/p&gt;

&lt;table&gt;
&lt;thead&gt;
&lt;tr&gt;
&lt;th&gt;Output&lt;/th&gt;
&lt;th align=&#34;center&#34;&gt;Function&lt;/th&gt;
&lt;/tr&gt;
&lt;/thead&gt;

&lt;tbody&gt;
&lt;tr&gt;
&lt;td&gt;All BNF sections, chemicals and presentations matching a name (case-insensitive)&lt;/td&gt;
&lt;td align=&#34;center&#34;&gt;drug_details(name= &amp;ldquo;&amp;hellip;&amp;rdquo;)&lt;/td&gt;
&lt;/tr&gt;

&lt;tr&gt;
&lt;td&gt;All chemicals and presentations matching a code&lt;/td&gt;
&lt;td align=&#34;center&#34;&gt;drug_details(chemical_or_presentation_code= &amp;ldquo;&amp;hellip;&amp;rdquo;)&lt;/td&gt;
&lt;/tr&gt;

&lt;tr&gt;
&lt;td&gt;All BNF sections matching a code&lt;/td&gt;
&lt;td align=&#34;center&#34;&gt;drug_details(BNF_section_code= &amp;ldquo;&amp;hellip;&amp;rdquo;)&lt;/td&gt;
&lt;/tr&gt;

&lt;tr&gt;
&lt;td&gt;All BNF sections, chemicals and presentations exactly matching a name or code&lt;/td&gt;
&lt;td align=&#34;center&#34;&gt;drug_details(exact_name_or_code= &amp;ldquo;&amp;hellip;&amp;rdquo;)&lt;/td&gt;
&lt;/tr&gt;
&lt;/tbody&gt;
&lt;/table&gt;

&lt;p&gt;Or a variation of the above (with at least 1 name, chemical_or_presentation_code, BNF_section_code, or exact_name_or_code).
N.B For now the use of multiple terms in one category requires &amp;ldquo;&amp;amp;q=&amp;ldquo;, e.g
drug_details(name=&amp;ldquo;lipid&amp;amp;q=drug&amp;rdquo;)&lt;/p&gt;

&lt;h2 id=&#34;5-organisation-codes&#34;&gt;5. Organisation Codes&lt;/h2&gt;

&lt;p&gt;Search for details about a CCG or practice by code or name.&lt;/p&gt;

&lt;table&gt;
&lt;thead&gt;
&lt;tr&gt;
&lt;th&gt;Output&lt;/th&gt;
&lt;th align=&#34;center&#34;&gt;Function&lt;/th&gt;
&lt;/tr&gt;
&lt;/thead&gt;

&lt;tbody&gt;
&lt;tr&gt;
&lt;td&gt;All organisations matching a code or name&lt;/td&gt;
&lt;td align=&#34;center&#34;&gt;organisation_codes(organisation_code_or_name= &amp;ldquo;&amp;hellip;&amp;rdquo;)&lt;/td&gt;
&lt;/tr&gt;

&lt;tr&gt;
&lt;td&gt;All CCGs matching a code or name&lt;/td&gt;
&lt;td align=&#34;center&#34;&gt;organisation_codes(CCG_code_or_name= &amp;ldquo;&amp;hellip;&amp;rdquo;)&lt;/td&gt;
&lt;/tr&gt;

&lt;tr&gt;
&lt;td&gt;All practices matching a code or name&lt;/td&gt;
&lt;td align=&#34;center&#34;&gt;list_size(ASTRO_PU_by_code= &amp;ldquo;&amp;hellip;&amp;rdquo;)&lt;/td&gt;
&lt;/tr&gt;

&lt;tr&gt;
&lt;td&gt;All organisations exactly matching a code or name&lt;/td&gt;
&lt;td align=&#34;center&#34;&gt;organisation_codes(exact_name_or_code= &amp;ldquo;&amp;hellip;&amp;rdquo;)&lt;/td&gt;
&lt;/tr&gt;
&lt;/tbody&gt;
&lt;/table&gt;

&lt;p&gt;Or a variation of the above (with at least 1 organisation_code_or_name, CCG_code_or_name, practice_code_or_name, or exact_name_or_code).
N.B For now the use of multiple terms in one category requires &amp;ldquo;&amp;amp;q=&amp;ldquo;, e.g
organisation_codes(organisation_code_or_name= &amp;ldquo;Beaumont&amp;amp;q=Gloucester&amp;rdquo;)&lt;/p&gt;

&lt;h2 id=&#34;6-list-size-and-astro-pus-by-ccg-or-practice&#34;&gt;6. List size and ASTRO_PUs by CCG or practice&lt;/h2&gt;

&lt;p&gt;Search for details about a CCG or practice by code or name. Returns values for all months available.&lt;/p&gt;

&lt;table&gt;
&lt;thead&gt;
&lt;tr&gt;
&lt;th&gt;Output&lt;/th&gt;
&lt;th align=&#34;center&#34;&gt;Function&lt;/th&gt;
&lt;/tr&gt;
&lt;/thead&gt;

&lt;tbody&gt;
&lt;tr&gt;
&lt;td&gt;Total list size for all CCGs&lt;/td&gt;
&lt;td align=&#34;center&#34;&gt;list_size()&lt;/td&gt;
&lt;/tr&gt;

&lt;tr&gt;
&lt;td&gt;Total list size for all practices by practice code, or CCG code&lt;/td&gt;
&lt;td align=&#34;center&#34;&gt;list_size(list_size_by_code= &amp;ldquo;&amp;hellip;&amp;rdquo;)&lt;/td&gt;
&lt;/tr&gt;

&lt;tr&gt;
&lt;td&gt;ASTRO-PU cost and items for practices by practice code, or CCG code&lt;/td&gt;
&lt;td align=&#34;center&#34;&gt;list_size(ASTRO_PU_by_code= &amp;ldquo;&amp;hellip;&amp;rdquo;)&lt;/td&gt;
&lt;/tr&gt;
&lt;/tbody&gt;
&lt;/table&gt;

&lt;p&gt;Or a variation of the above.&lt;/p&gt;

&lt;p&gt;THe only thing I haven&amp;rsquo;t sorted is the CCG Boundaries, &amp;ldquo;Search for the boundaries of a CCG, or location of a practice, by code. Returns GeoJSON.&amp;rdquo;
You could still download it onto your desktop directly from the API, but I think that doing this in-studio makes it much easier to update the information.&lt;/p&gt;

&lt;p&gt;&lt;strong&gt;UPDATE 13/08/17:&lt;/strong&gt;&lt;br /&gt;
CCG Boundaries/Practice locations have been added.
Read &lt;a href=&#34;https://fergustaylor.github.io/post/openprescribingr-update/&#34;&gt;here.&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;Further explanation on the terms used here - &lt;a href=&#34;https://openprescribing.net/api/&#34;&gt;https://openprescribing.net/api/&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;Essential reading &lt;a href=&#34;https://openprescribing.net/caution/&#34;&gt;https://openprescribing.net/caution/&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;&lt;a href=&#34;https://openprescribing.net/&#34;&gt;https://openprescribing.net/&lt;/a&gt;&lt;/p&gt;

&lt;iframe width=&#34;100%&#34; height=&#34;550&#34; src=&#34;https://www.youtube.com/embed/U-hvuEfUUOM&#34; frameborder=&#34;0&#34; allowfullscreen&gt;&lt;/iframe&gt;
</description>
    </item>
    
  </channel>
</rss>
