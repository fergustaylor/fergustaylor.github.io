<!DOCTYPE HTML>

<!-- 
Strata by HTML5 UP
html5up.net | @n33co
Free for personal and commercial use under the CCA 3.0 license (html5up.net/license)
-->
<html>
	<head>
		<title>Fergus &middot; Fergus Taylor</title>
		<meta charset="utf-8" />
		<meta name="viewport" content="width=device-width, initial-scale=1" />
		<meta name="author" content="Fergus Taylor">
		<meta name="description" content="Project Data analysis">
		<meta http-equiv="content-language" content="en-uk" />

		
		<meta name="og:site_name" content="Fergus Taylor">
		<meta name="og:title" content="Fergus">
		<meta name="og:url" content="/categories/fergus/">
		
		<meta name="og:image" content="/images/avatar.jpg">
		
		

		<meta name="generator" content="Hugo 0.29" />

		<!--[if lte IE 8]><script src='/js/ie/html5shiv.js'></script><![endif]-->
		<link rel="stylesheet" type="text/css" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.min.css">
		<link rel="stylesheet" href="/css/main.css" />
		<!--[if lte IE 8]><link rel="stylesheet" href="//css/ie8.css"><![endif]-->

		
		<link href="/categories/fergus/index.xml" rel="alternate" type="application/rss+xml" title="Fergus Taylor" />
		<link href="/categories/fergus/index.xml" rel="feed" type="application/rss+xml" title="Fergus Taylor" />
		
		
	</head>

	<body id="top">
		<!-- Header -->
<header id="header">
	
	<a href="/" class="image avatar"><img src="/images/avatar.jpg" alt="" /></a>
	
	
		<h1><strong>I&rsquo;m Fergus Taylor</strong>, a Glasgow Uni Med Student. <br> I use this site to display project data analysis<br> as I learn to use <a href="//https://twitter.com/hashtag/Rstats?src=hash">#Rstats</a>.</h1>
	

	
		<nav id="sidebar">
			<ul>
			
				<li><a href="/">Home</a></li>
			
				<li><a href="/post/">Archive</a></li>
			
			</ul>
		</nav>
	
</header>


		<!-- Main -->
		<div id="main">
			
    

    
    
        <span>
    <h1>
        <a href="/post/post8/">More examples for openprescribingR</a>
    </h1>

    <i class="fa fa-calendar"></i>&nbsp;&nbsp;
<time datetime="2017-09-17 13:39:46 &#43;0200 &#43;0200">170-09-2017</time>&nbsp;&nbsp;




    
    
        <i class="fa fa-folder"></i>&nbsp;&nbsp;
        
        <a class="article-category-link" href="/categories/fergus">Fergus</a>
        
        
    



   
   


</span>

<p>This package works by interacting with the openprescribing.net api. Openprescribing.net continues to collate monthly data from NHS digital, which means that you can search the entire dataset without downloading each monthly file. It uses limited search arguments to return data. (This will be updated as the api changes). As such it&rsquo;s not possible to return a desired dataset in some cases by using one function alone in this package. However, it is possible to cross-reference functions in order to return the dataset you&rsquo;d like.</p>
<hr>

    
        <span>
    <h1>
        <a href="/post/post6/">openprescribingR UPDATE 2</a>
    </h1>

    <i class="fa fa-calendar"></i>&nbsp;&nbsp;
<time datetime="2017-09-15 13:39:46 &#43;0200 &#43;0200">150-09-2017</time>&nbsp;&nbsp;




    
    
        <i class="fa fa-folder"></i>&nbsp;&nbsp;
        
        <a class="article-category-link" href="/categories/fergus">Fergus</a>
        
        
    



   
   


</span>

<p>See the map.
See the code.</p>
<hr>

    
        <span>
    <h1>
        <a href="/post/post5/">openprescribingR UPDATE</a>
    </h1>

    <i class="fa fa-calendar"></i>&nbsp;&nbsp;
<time datetime="2017-09-13 13:39:46 &#43;0200 &#43;0200">130-09-2017</time>&nbsp;&nbsp;




    
    
        <i class="fa fa-folder"></i>&nbsp;&nbsp;
        
        <a class="article-category-link" href="/categories/fergus">Fergus</a>
        
        
    



   
   


</span>

<p>I wanted to plot some of this new openprescribing data geographically today after playing around with the new functions, however I soon realised I needed locations, and so I converted the &lsquo;CCG boundaries&rsquo; section of the api.
New Function 7. CCG boundaries Search for the boundaries of a CCG, or location of a practice, by code. Returns GeoJSON.
   Output Function     Boundaries of all CCGs CCG_boundaries_or_location()   Boundaries of an individual CCG CCG_boundaries_or_location(CCG_code = &ldquo;99H&rdquo;)   Location (approximate) of practices in a CCG, by code CCG_boundaries_or_location(CCG_code = &ldquo;99H&rdquo;)   Location (approximate) of a practice in a CCG CCG_boundaries_or_location(CCG_code = &ldquo;99H&rdquo;, practice_code = &ldquo;P87003&rdquo;)   Location (approximate) of a practice in a CCG CCG_boundaries_or_location(practice_code = &ldquo;P87003&rdquo;)    Personally I find it very difficult to read JSON files, so you can tidy it up afterwards using JSONlite or tidyjson but I&rsquo;ll leave that to you.</p>
<hr>

    
        <span>
    <h1>
        <a href="/post/post4/">openprescribingR</a>
    </h1>

    <i class="fa fa-calendar"></i>&nbsp;&nbsp;
<time datetime="2017-09-11 13:39:46 &#43;0200 &#43;0200">110-09-2017</time>&nbsp;&nbsp;




    
    
        <i class="fa fa-folder"></i>&nbsp;&nbsp;
        
        <a class="article-category-link" href="/categories/fergus">Fergus</a>
        
        
    



   
   


</span>

<p>Using the (beta) RESTful API and a few lines of R, I made a set of functions to download and import OpenPrescribing data directly into RStudio. There are 6 functions, divided into data look-up and data-import tools.
Installation:
library(devtools)
devtools::install_github(&quot;fergustaylor/openprescribingR&quot;)
Load:
library(openprescribingR)
These functions give details on drugs/organisations/list sizes.
 drug_details()
 organisation_codes()
 list_size()
  These functions allow you to load data.
 spending_by_CCG()
 spending_by_code()
 spending_by_practice()</p>
<hr>

    
        <span>
    <h1>
        <a href="/post/post3/">Public Health Outcomes Framework</a>
    </h1>

    <i class="fa fa-calendar"></i>&nbsp;&nbsp;
<time datetime="2017-08-04 13:39:46 &#43;0200 &#43;0200">40-08-2017</time>&nbsp;&nbsp;




    
    
        <i class="fa fa-folder"></i>&nbsp;&nbsp;
        
        <a class="article-category-link" href="/categories/fergus">Fergus</a>
        
        
    



   
   


</span>

<p>I initially saw the notice of the August update via twitter @PHE_uk, but I later found the full future publication timeline available at gov.uk.
All their new statistics are summarised in their blog Public Health Matters, and the data is available online with interactive plots through their Fingertips service.
It summarises 33 different National Public Health Profiles, including the most recent version of the Public Health Outcomes Framework.
While I was prepared to download information I wanted directly through the site - I found their fantastic package tool &lsquo;fingertipsR&rsquo; which allows me to import PH data from all profiles directly into the R environment through their API.</p>
<hr>

    

    
    
        <a class="button" rel="prev" href="//categories/fergus/">
            « Newer
        </a>
    

    
        <span class="spacer"></span>
    

    
        <a class="button" rel="next" href="//categories/fergus/page/3/">
            Older »
        </a>
    



		</div>

		<!-- Footer -->
<footer id="footer">
	<ul class="icons">
		
		
		
		<li><a href="//twitter.com/ferguswtaylor" target="_blank" class="icon fa-twitter"><span class="label">Twitter</span></a></li>
		
		
		<li><a href="//github.com/fergustaylor" target="_blank" class="icon fa-github"><span class="label">GitHub</span></a></li>
		
		
		
		
		
		
		
		<li><a href="/categories/fergus/index.xml" class="icon fa-rss" type="application/rss+xml"><span class="label">RSS</span></a></li>
		
	</ul>

	<ul class="copyright">
		
		<li>&copy; Fergus Taylor</li>
		
		<li>Design: <a href="//html5up.net">HTML5 UP</a></li>
		
		<li>Photos my own.</li>
		
	</ul>
</footer>

<!-- Scripts -->
<script src="/js/jquery.min.js"></script>
<script src="/js/jquery.poptrox.min.js"></script>
<script src="/js/skel.min.js"></script>
<script src="/js/util.js"></script>

<script src="/js/main.js"></script>





	</body>
</html>
